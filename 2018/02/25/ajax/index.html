<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/fly.png"/>
	 <link rel="shortcut icon" href="/img/fly.png">
	
			
    <title>
    Chloe Hwang
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">HELLO</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/Algorithm/">Algorithm</a></li><li><a class="category-link" href="/categories/CSS/">CSS</a></li><li><a class="category-link" href="/categories/HTML/">HTML</a></li><li><a class="category-link" href="/categories/JavaScript/">JavaScript</a></li><li><a class="category-link" href="/categories/NETWORK/">NETWORK</a></li><li><a class="category-link" href="/categories/Vue/">Vue</a></li><li><a class="category-link" href="/categories/WEB-SECURE/">WEB SECURE</a></li><li><a class="category-link" href="/categories/计算机网络/">计算机网络</a></li><li><a class="category-link" href="/categories/读书笔记/">读书笔记</a></li><li><a class="category-link" href="/categories/踩坑札记/">踩坑札记</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        <li class="active">
	            <a href="#s1">归档</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="archive-link" href="/archives/2018/07/">July 2018</a></li><li><a class="archive-link" href="/archives/2018/06/">June 2018</a></li><li><a class="archive-link" href="/archives/2018/05/">May 2018</a></li><li><a class="archive-link" href="/archives/2018/04/">April 2018</a></li><li><a class="archive-link" href="/archives/2018/03/">March 2018</a></li><li><a class="archive-link" href="/archives/2018/02/">February 2018</a></li><li><a class="archive-link" href="/archives/2018/01/">January 2018</a></li><li><a class="archive-link" href="/archives/2017/12/">December 2017</a></li><li><a class="archive-link" href="/archives/2017/11/">November 2017</a>
	                    </ul>
	        </li>
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="关于">
		                关于
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="前端导航">
		                前端导航
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/ChloeHQ" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(http://oz572skeg.bkt.clouddn.com/ss1.jpg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >深入理解AJAX</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h2 id="一、AJAX基本概念"><a href="#一、AJAX基本概念" class="headerlink" title="一、AJAX基本概念"></a>一、AJAX基本概念</h2><h5 id="AJAX-asynchronous-javascript-and-xml"><a href="#AJAX-asynchronous-javascript-and-xml" class="headerlink" title="AJAX(asynchronous javascript and xml)"></a>AJAX(asynchronous javascript and xml)</h5><blockquote>
<p>异步的Javascript和xml,通过在后台与网页进行少量数据交换，在不重新加载整个页面的情况下，对网页进行更新。  </p>
</blockquote>
<h5 id="同步和异步："><a href="#同步和异步：" class="headerlink" title="同步和异步："></a>同步和异步：</h5><p><strong>同步：</strong>传统的同步交换方式如下图，首先客户端向服务器端提交一个处理请求，然后，服务器端接收到请求后，按照预先编写好的程序中的业务逻辑进行处理，例如和数据库服务器进行数据交换，最后，服务器对请求进行响应，将结果返回给客户端，返回一个html+css用于显示。<br><img src="http://oz572skeg.bkt.clouddn.com/ajax0.png" alt="同步交互"><br><em>异步：</em>异步交互则很好地解决了不连贯的用户体验<br><img src="http://oz572skeg.bkt.clouddn.com/ajax1.png" alt="同步交互"> </p>
<h2 id="二、使用AJAX"><a href="#二、使用AJAX" class="headerlink" title="二、使用AJAX"></a>二、使用AJAX</h2><p><strong>步骤：</strong> 1、创建AJAX对象；2、发出HTTP请求；3、接收服务器传回的数据；4、更新网页数据  </p>
<h4 id="1、创建AJAX对象"><a href="#1、创建AJAX对象" class="headerlink" title="1、创建AJAX对象"></a>1、创建AJAX对象</h4><p>  ajax技术的核心是<em>XMLHttpRequest对象(XML)</em>,它为向服务求发送请求和解析响应提供了流畅的接口，能够以异步方式从服务器获取信息。<br>IE5中，XHR对象是通过MSXML库中的一个ActiveX对象实现的，IE7+及其他标准浏览器都支持原生的XHR对象。  </p>
<p><strong>创建XHR对象的兼容写法：</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.XMLHttpRequest)&#123;</span><br><span class="line">	request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	request = <span class="keyword">new</span> ActiveXObject(<span class="string">'Microsoft.XMLHTTP'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="2、发送请求"><a href="#2、发送请求" class="headerlink" title="2、发送请求"></a>2、发送请求</h4><p><strong>open()</strong><br>使用XHR对象，要调用的第一个方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">request.open(&quot;GET&quot;,&quot;example.php?fname=Henry&amp;lname=Ford&quot;,true);</span><br><span class="line">OR</span><br><span class="line">request.open(&quot;POST&quot;,&quot;example.php&quot;,true);</span><br><span class="line">send(&quot;fname=Henry&amp;lname=Ford&quot;);</span><br></pre></td></tr></table></figure></p>
<h5 id="1-第一个参数用于指定请求的方式，不区分大小写"><a href="#1-第一个参数用于指定请求的方式，不区分大小写" class="headerlink" title="(1)第一个参数用于指定请求的方式，不区分大小写"></a>(1)第一个参数用于指定请求的方式，不区分大小写</h5><ul>
<li>‘GET’用于常规请求，适用于URL完全指定请求资源，当请求对服务器没有任何副作用以及服务器响应是可缓存的情况下。<br>GET请求可被缓存<br>GET请求保留在浏览器历史记录中<br>GET请求可被收藏为标签<br>GET请求不应再处理敏感数据时使用<br>GET请求有长度限制<br>GET请求应当用于取回数据  </li>
<li>‘POST’常用语HTML表单，请求主体中包含额外数据。相同URL重复POST请求从服务器得到的响应可能不同，且不应该缓存使用这个方法的请求。<br>POST请求不会被缓存<br>POST请求不会被保留在浏览器历史记录中<br>POST请求不能被收藏为标签<br>POST请求对数据长度没有要求  <h5 id="2-第二个参数是URL"><a href="#2-第二个参数是URL" class="headerlink" title="(2)第二个参数是URL"></a>(2)第二个参数是URL</h5>该URL相对于执行代码的当前页面，且只能向同一个域中使用相同端口和协议的URL发送请求。<br>(3)第三个参数表示是否异步发送请求，默认为true。</li>
</ul>
<p><strong>send()</strong><br>send()方法接收一个参数，即要作为请求主体发送的数据。调用send()后请求被发送到服务器。   </p>
<h4 id="3、接收响应"><a href="#3、接收响应" class="headerlink" title="3、接收响应"></a>3、接收响应</h4><p>一个完整的HTTP响应由状态行、响应头和响应主体组成。可通过XHR对象的属性和方法使用。  </p>
<table>
<thead>
<tr>
<th style="text-align:center">属性名称</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">responseText</td>
<td style="text-align:left">作为响应主体被返回的文本（文本形式）</td>
</tr>
<tr>
<td style="text-align:center">responseXML</td>
<td style="text-align:left">如果响应的内容类型是’text/xml’或者’applicatio/xml’，这个属性中将包含着响应数据的XML DOM文档</td>
</tr>
<tr>
<td style="text-align:center">status</td>
<td style="text-align:left">HTTP状态码</td>
</tr>
<tr>
<td style="text-align:center">statusText</td>
<td style="text-align:left">HTTP状态说明</td>
</tr>
</tbody>
</table>
<p><strong>readyState:</strong>是XHR对象的一个属性，表示XMLHttpRequest对象的处理状态  </p>
<table>
<thead>
<tr>
<th style="text-align:center">readyState</th>
<th style="text-align:left">表示</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0(unsent)</td>
<td style="text-align:left">XHR对象还没有完成初始化，还未调用open()</td>
<td style="text-align:left">准备司机、车、原件</td>
</tr>
<tr>
<td style="text-align:center">1(opened)</td>
<td style="text-align:left">XHR对象开始发送请求，</td>
<td style="text-align:left">需要运送十车原件，当前正在送第几车</td>
</tr>
<tr>
<td style="text-align:center">2(headers_received)</td>
<td style="text-align:left">XHR对象的请求发送完成</td>
<td style="text-align:left">十车发送完毕</td>
</tr>
<tr>
<td style="text-align:center">3(loading)</td>
<td style="text-align:left">XHR对象开始读取服务器响应</td>
<td style="text-align:left">准备拉回十车加工件，当前第几车</td>
</tr>
<tr>
<td style="text-align:center">4(done)</td>
<td style="text-align:left">XHR对象读取服务器响应结束</td>
<td style="text-align:left">十车加工件全部拉回</td>
</tr>
</tbody>
</table>
<p><strong>status状态：</strong>是XHR对象的一个属性，表示响应的HTTP状态码，有了readyState为4才会有响应状态。  </p>
<table>
<thead>
<tr>
<th style="text-align:center">status</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1xx</td>
<td style="text-align:left">信息响应类，表示接收到请求并且继续处理</td>
<td style="text-align:left">所有拉过去的货，工厂还没有加工完毕</td>
</tr>
<tr>
<td style="text-align:center">2xx</td>
<td style="text-align:left">处理成功响应类，表示动作被成功接收、理解和接受</td>
<td style="text-align:left">所有拉过去的货，工厂已经加工完毕</td>
</tr>
<tr>
<td style="text-align:center">3xx</td>
<td style="text-align:left">重定向响应类，为完成指定动作必须接收进一步处理</td>
<td style="text-align:left">所有拉过去的货，工厂设备不够，让其他工厂帮忙加功</td>
</tr>
<tr>
<td style="text-align:center">4xx</td>
<td style="text-align:left">客户端错误，客户请求包含语法错误或者是不能正确执行</td>
<td style="text-align:left">这十车原件有质量问题，工厂不能加工</td>
</tr>
<tr>
<td style="text-align:center">5xx</td>
<td style="text-align:left">服务端错误，服务器不能正确执行一个正确的请求</td>
<td style="text-align:left">工厂加工过程中断电，不能继续加工</td>
</tr>
</tbody>
</table>
<blockquote>
<p><a href="https://www.cnblogs.com/liu-fei-fei/p/5618782.html" target="_blank" rel="external">更多状态码https://www.cnblogs.com/liu-fei-fei/p/5618782.html</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">request.onreadystatechange=function()&#123;</span><br><span class="line">  if (request.readyState==4 &amp;&amp; request.status==200)&#123;</span><br><span class="line">  	document.getElementById(&quot;myDiv&quot;).innerHTML=request.responseText;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><strong>必须在调用open()之前指定onreadystatechange事件处理程序才能够确保跨浏览器兼容性，否则无法接受readyState属性为0和1的情况。</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//创建xhr对象</span><br><span class="line">    var xhr;</span><br><span class="line">    if(window.XMLHttpRequest)&#123;</span><br><span class="line">        xhr = new XMLHttpRequest();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        xhr = new ActiveXObject(&apos;Microsoft.XMLHTTP&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">    //异步接受响应</span><br><span class="line">    xhr.onreadystatechange = function()&#123;</span><br><span class="line">        if(xhr.readyState == 4)&#123;</span><br><span class="line">            if(xhr.status == 200)&#123;</span><br><span class="line">                //实际操作</span><br><span class="line">                result.innerHTML += xhr.responseText;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //发送请求</span><br><span class="line">    xhr.open(&apos;get&apos;,&apos;message.xml&apos;,true);</span><br><span class="line">    xhr.send();</span><br></pre></td></tr></table></figure></p>
<h4 id="三、头部信息"><a href="#三、头部信息" class="headerlink" title="三、头部信息"></a>三、头部信息</h4><p>默认情况下，在发送XHR请求的同时，还会发送下列头部信息：  </p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Accept</td>
<td style="text-align:left">浏览器能够处理的内容类型</td>
</tr>
</tbody>
</table>
<h5 id="设置头部"><a href="#设置头部" class="headerlink" title="设置头部"></a>设置头部</h5><p>使用<strong>setRequestHeader(name,value)</strong>方法可以设置自定义的请求头部信息，必须在调用open()之后，调用send()之前使用！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(&apos;post&apos;,&apos;service.php&apos;,true);</span><br><span class="line">xhr.setRequestHeader(&apos;Content-Type&apos;,&apos;application/x-www-urlencoded&apos;);</span><br><span class="line">xhr.send(&apos;data=test123&apos;);</span><br></pre></td></tr></table></figure></p>
<h5 id="获取头部"><a href="#获取头部" class="headerlink" title="获取头部"></a>获取头部</h5><p>调用XHR对象的getResponseHeader(name)方法并传入头部名称，可以取得相应的响应头部信息<br>getAllResponseHeaders()方法则可以取得一个包含所有头部信息的长字符串。  </p>
<h4 id="四、jQuery中的ajax"><a href="#四、jQuery中的ajax" class="headerlink" title="四、jQuery中的ajax"></a>四、jQuery中的ajax</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type: <span class="string">"post"</span>, 【以POST或GET的方式请求。默认GET。PUT和DELETE也可以用，有的浏览器不支持】</span><br><span class="line">    url: url,   【请求的目的地址，须是一个字符串。】</span><br><span class="line">    contentType: <span class="string">"application/json"</span>,       【以哪种数据类型发送请求】</span><br><span class="line">    data: data,    【请求的数据】</span><br><span class="line">    dataType: <span class="string">"json"</span>,  【想从服务器得到的数据类型。html,json,jsonp,text】</span><br><span class="line">    <span class="keyword">async</span>:<span class="literal">false</span>,【默认为<span class="literal">true</span>异步请求，设置为<span class="literal">false</span>时为同步请求】</span><br><span class="line">    beforeSend:<span class="function"><span class="keyword">function</span></span>&#123;......&#125;,  【传递异步请求之前的事件】</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span></span>&#123;......&#125;,  【请求成功之后的回调】</span><br><span class="line">    error:<span class="function"><span class="keyword">function</span></span>&#123;......&#125;,    【请求失败之后的回调】</span><br><span class="line">    complete(<span class="function"><span class="keyword">function</span></span>&#123;......&#125;,  【不管请求成功还是错误，只要请求完成，可以执行的事件。】 </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://www.cnblogs.com/exhuasted/p/7651743.html" target="_blank" rel="external">参考：https://www.cnblogs.com/exhuasted/p/7651743.html</a></p>
</blockquote>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-chloehq-github'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://chloehq.github.io/2018/02/25/ajax/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://chloehq.github.io/2018/02/25/ajax/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-chloehq-github.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://chloehq.github.io " style="border-bottom: none;">Chole</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2018总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
